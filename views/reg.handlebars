<div class="login-form"></div>
<form class="signupform">
  <div>
    <label for="username">username:</label>
    <input type="text" id="username" />
  </div>
  <div>
    <label for="s-email">email:</label>
    <input type="text" id="s-email" />
  </div>
  <div>
    <label for="s-pass">password:</label>
    <input type="password" id="s-pass" />
  </div>
  <div>
    <button type="submit" class="btn btn-info">signup</button>
  </div>
</form>

<script>
 
 const signupFunc= async (username, email, password)=>{
  if (username && email && password) {
    const res = await fetch('/api/users', {
      method: 'post',
      body: JSON.stringify({
        username,
        email,
        password
      }),
      headers: { 'Content-Type': 'application/json' }
    });

    if (res.ok) {
      document.location.replace('/');
    } else {
      console.log(res);
    }
  }
 }

async function signupHandler(event) {
  event.preventDefault();


// getting all inputs
  const username = document.querySelector('#username').value ;
  const email = document.querySelector('#s-email').value ;
  const password = document.querySelector('#s-pass').value ;

  if(username&&email&&password){let res=await fetch("/api/users",{method:"post",body:JSON.stringify({username,email,password}),headers:{"Content-Type":"application/json"}});res.ok?document.location.replace("/"):console.log(res)}

}
document.querySelector('.signupform').addEventListener('submit', signupHandler);

</script>
